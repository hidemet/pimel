// resources/scss/custom.scss

// Importa i tuoi font
// Esempio con Google Fonts (Inter e Material Symbols)
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200");
@import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css");
// Esempio con Font Awesome (se usi il CDN)
// Nota: per Font Awesome, se lo hai installato via npm, l'importazione potrebbe essere diversa,
// ad esempio: @import '~@fortawesome/fontawesome-free/css/all.css';
// Verifica la documentazione di come hai installato Font Awesome.
// Se usi il link CDN come nel tuo commento, questo @import è corretto.
@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css");

// Poi puoi definire le tue variabili per i font o usarli direttamente
// Esempio:
// $font-family-sans-serif: 'Inter', sans-serif;
// $font-family-base: $font-family-sans-serif;

// body {
//   font-family: $font-family-base;
// }

// 1. Importa le funzioni e le variabili NECESSARIE di Bootstrap
//    USA IL PREFISSO '~' PER INDICARE node_modules
@import "bootstrap/scss/functions"; // Cambiato
@import "bootstrap/scss/variables"; // Cambiato
@import "bootstrap/scss/variables-dark"; // Cambiato (se lo usi)
@import "bootstrap/scss/maps"; // Cambiato
@import "bootstrap/scss/mixins";

@import "bootstrap/scss/bootstrap";

// 2. DEFINISCI I TUOI COLORI PERSONALIZZATI E VARIABILI GLOBALI
$custom-primary: #000000; // Updated primary color
$custom-secondary: #545f70; // Updated secondary color
$custom-warning: #f8cc47;
$custom-navbar-color: #203672;
$custom-ctc: #ffdf91; // Updated ctc color
$navbar-bg-custom: #e1e2e8; // New variable for custom navbar background
$surface-color: #e1e2e8; // Moved this variable definition up here before it's used

// Colori globali richiesti
$global-text-color: #000000; // Colore del testo globale
// $global-h1-color: #244777;
$servizi-page-bg: #f9f9ff;
$default-body-bg: #f8f9ff; // Updated value
$footer-custom-bg-color: #203672; // New variable for custom footer background
$link-color: $custom-navbar-color; // Colore dei link impostato a #203672
$link-hover-color: darken($custom-navbar-color, 10%);
$newsletter-bg-color: #f8eedb; // New variable for newsletter background
$consulenza-bg-color: #e4eaf1; // New variable for consulenza box background
$article-list-bg: #f8f9ff; // New variable for article list background

$body-bg: #ecedf4; // Sets the base background color for the body

$primary: $custom-primary;

// Colori specifici per gli sfondi degli header di pagina
$header-bg-home: #d3e4ff; // Utilizza il colore primario definito
$header-text-home: $global-text-color; // Testo scuro per lo sfondo trasparente
$header-lead-text-home: rgba(
    $global-text-color,
    0.75
); // Lead text per lo sfondo trasparente

// Imposta max-width per i container principali di header e footer
// e per un container principale per lo slot main
header nav.navbar > .container,
footer.footer-custom-background > div.container {
    max-width: 1140px !important;
}

.page-content-container {
    // Questo si applica ai <div class="container page-content-container"> nelle tue viste
    max-width: 1140px !important;
}
// Se il div del copyright nel footer deve anche avere il contenuto limitato:
footer.footer-custom-background > div:not(.container) > .container {
    // Questo è un esempio se aggiungi un container al div del copyright
    // max-width: 1140px;
}

// Styles for home page hero section text, ensuring they override general hero styles if necessary
.home-header-bg {
    // background-color: #203672; // Already defined
    // color: #d3e4ff; // Already defined, acts as a base for this section

    .hero-section {
        // Override general .hero-section text colors for the home page context
        h1.display-6, // Targets the <h1 class="display-6 ...">
        p.h5,
        p.lead {
            color: #d3e4ff; // Desired light blue color from original inline styles
        }
    }
}

// Font
$font-family-sans-serif:
    "Inter",
    system-ui,
    -apple-system,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    "Noto Sans",
    "Liberation Sans",
    Arial,
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";

// Sovrascrivi la variabile base di Bootstrap per il font
$font-family-base: $font-family-sans-serif;
// Sovrascrivi il colore del testo di base di Bootstrap
$body-color: $global-text-color; // Questo imposterà il colore di default del body
$body-bg: $default-body-bg;

// Sovrascrivi le variabili dei link PRIMA di importare bootstrap.scss
$link-color: $custom-navbar-color; // Colore dei link
$link-hover-color: darken($custom-navbar-color, 10%); // Colore dei link hover

// Sovrascrivi le variabili per .btn-link
$btn-link-color: $link-color;
$btn-link-hover-color: $link-hover-color;

// 3. SOVRASCRIVI LA MAPPA DEI COLORI TEMATICI `$theme-colors`
$link-hover-decoration: none; // Nessuna sottolineatura sui link hover
$theme-colors: map-merge(
    $theme-colors,
    (
        "primary": $primary,
        // Updated to use the new primary color
        "secondary": $custom-secondary,
        // Updated to use the new secondary color
        "warning": $custom-warning,
        "ctc": $custom-ctc,
        // Updated to use the new ctc color
    )
);

// 4. Importa il resto di Bootstrap (il minimo indispensabile o tutto)
// Se sai quali componenti usi, puoi importarli selettivamente per ridurre la dimensione del file.
// Per semplicità, importiamo tutto:
@import "bootstrap/scss/bootstrap"; // Cambiato

// 5. I TUOI STILI PERSONALIZZATI GLOBALI (devono essere qui, fuori da altre classi)

/* Header Backgrounds */
.page-header-bg {
    background-color: $header-bg-home;
}

.home-header-bg {
    background-color: #203672;
    color: #d3e4ff; // Changed from $header-text-home to #1f4876

    // Nested hero-section styles specific to home-header-bg were added above.
    // This rule for .home-header-bg .hero-section h1, .h1 etc. might be redundant or can be removed
    // if the more specific rules above cover all cases.
    // For now, ensure the specific rules for h1.display-6, p.h5, p.lead take precedence.
}

// Material Design 3 icon alignment fixes
.material-symbols-outlined {
    vertical-align: middle;
    font-size: 1.2rem;
    line-height: 1;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    top: -0.1em; // Fine-tune vertical alignment with text
}

// Icon with text alignment helper
.icon-text {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;

    .material-symbols-outlined {
        top: 0; // Reset top positioning when in flex container
    }
}

body {
    display: flex; // Per sticky footer
    flex-direction: column; // Per sticky footer
    min-height: 100vh; // Per sticky footer
    // Il colore del testo e il font family sono già impostati tramite le variabili Bootstrap
    // $body-color e $font-family-base, quindi non è necessario ripeterli qui.
}

main {
    flex-grow: 1; // Per sticky footer
}

// Sfondo specifico per la pagina Servizi
body.page-servizi {
    background-color: $servizi-page-bg;
}

// Custom footer background class
.footer-custom-background {
    background-color: $footer-custom-bg-color !important; // Use important to override Bootstrap utilities if necessary
}

// --- STILI SPECIFICI PER COMPONENTI ---

// Stili Navbar
.navbar.bg-pimel-navbar {
    // Selector changed from bg-custom-navbar to bg-pimel-navbar
    background-color: transparent !important; // Changed from $navbar-bg-custom to transparent

    .navbar-brand,
    .nav-link {
        color: $custom-navbar-color;
        &:hover,
        &:focus {
            color: darken($custom-navbar-color, 10%);
        }
    }

    .nav-link.active {
        font-weight: $font-weight-semibold;
        color: $custom-navbar-color;
    }

    .navbar-toggler {
        border-color: rgba(
            lighten($custom-navbar-color, 5%),
            0.35
        ); // Leggermente più chiaro e desaturato per il bordo
        .navbar-toggler-icon {
            // $custom-navbar-color (#244777)
            // Usiamo una versione leggermente più scura per l'icona per un miglior contrasto
            $toggler-icon-color-value: darken(
                $custom-navbar-color,
                5%
            ); // Questo è un tipo colore
            // Converti il colore in una stringa esadecimale robusta usando inspect()
            $toggler-icon-color-as-string: inspect($toggler-icon-color-value);
            // URL-escape il carattere '#' nel colore
            $escaped-toggler-color: str-replace(
                $toggler-icon-color-as-string,
                "#",
                "%23"
            );

            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='#{$escaped-toggler-color}' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }
    }

    .btn-outline-primary {
        &:hover,
        &:focus {
            color: $white; // Testo bianco su sfondo primario in hover (comportamento standard di Bootstrap)
        }
    }
} // Added closing brace for .navbar.bg-custom-navbar

.navbar-soft {
    padding-top: 0.8rem;
    padding-bottom: 0.8rem;
    box-shadow: 0 2px 5px rgba(darken($navbar-bg-custom, 25%), 0.15); // Ombra più morbida, basata sul nuovo colore navbar

    .btn {
        border-radius: $border-radius-pill; // Usa la variabile Bootstrap per coerenza
    }
}

// Style for home page hero image
.hero-image-custom {
    max-height: 450px;
}

// Aggiungi questi stili dopo .blog-post-item .post-excerpt

.blog-post-item {
    // transition: all 0.2s ease-in-out; // Se vuoi un effetto hover sull'intera card

    .article-card-image-col {
        // padding-right: 0; // Opzionale: Rimuovi il gutter destro della colonna immagine se vuoi il testo più vicino
    }

    .article-card-content-col {
        display: flex;
        flex-direction: column; // Importante per far funzionare mt-auto sui metadati
    }

    .article-image-container {
        width: 100%;
        aspect-ratio: 1 / 1; // Immagine quadrata per default, stile Substack
        // Puoi provare anche 4 / 3 o 16 / 9 se preferisci
        overflow: hidden;
        // border-radius: 0.375rem; // Esempio: rounded-3

        @media (min-width: map-get($grid-breakpoints, "md")) {
            // Su desktop, potresti volere un aspect ratio leggermente diverso
            // aspect-ratio: 4 / 3; // Ad esempio
        }

        .article-card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
            // border-radius: inherit; // Eredita il border-radius dal contenitore
        }
    }

    .article-card-rubrics {
        font-size: 0.8rem;
        .category-badge {
            color: $gray-700; // Colore per i badge rubrica
            font-weight: 500;
            &:hover {
                color: $custom-primary;
            }
        }
    }

    .post-title {
        font-size: 1.1rem; // Leggermente più grande per il titolo
        line-height: 1.3;
        color: $headings-color;
        // text-decoration: none; // Rimosso qui, applicato al link interno

        @media (min-width: map-get($grid-breakpoints, "md")) {
            font-size: 1.2rem; // Titolo un po' più grande su desktop
        }

        a.post-title {
            // Applica solo al link dentro l'h3
            text-decoration: none;
            &:hover {
                color: $custom-primary;
                text-decoration: underline; // Sottolinea su hover
            }
        }
    }

    // Troncamento Titolo (opzionale, se i titoli sono molto lunghi)
    .post-title-clamp {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
        -webkit-line-clamp: 2; // Tronca a 2 righe
        max-height: calc(
            1.3em * 2
        ); // Altezza per 2 righe (basato su line-height)
    }

    // Troncamento Excerpt
    .article-card-excerpt {
        font-size: 0.9rem;
        line-height: 1.5;
        color: $gray-700;

        display: -webkit-box;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;

        @include media-breakpoint-down(sm) {
            // CORREZIONE: usa breakpoint-down(sm)
            -webkit-line-clamp: 2;
            max-height: calc(1.5em * 2); // Altezza per 2 righe
        }
        @include media-breakpoint-up(sm) {
            // CORREZIONE: usa breakpoint-up(sm)
            -webkit-line-clamp: 3;
            max-height: calc(1.5em * 3); // Altezza per 3 righe
        }
    }
}

.article-meta-info {
    font-size: 0.8rem;
    // flex-grow: 1; // Lascia che questa parte occupi spazio se necessario
}

.article-interactions {
    font-size: 0.8rem; // Rende i numeri delle interazioni piccoli
    // text-align: right; // Allinea a destra su mobile se vanno a capo
    .stat-item {
        white-space: nowrap; // Evita che icona e numero vadano a capo
        .material-symbols-outlined {
            font-size: 1rem; // Icone piccole
            top: -1px; // Aggiustamento verticale
        }
    }
}

// Badge della rubrica (bg-secondary è il nostro giallo)
.badge.bg-secondary {
    // Bootstrap dovrebbe calcolare il colore del testo per contrasto.
    // Oppure se vuoi sempre testo nero/scuro:
    color: $dark !important; // O $gray-900
}

// Stili per i bottoni delle Rubriche nel blog
.category-button-nav {
    .btn-ctc {
        font-weight: $font-weight-semibold; // Imposta un peso del font più marcato
        text-decoration: none; // Rimuove la sottolineatura

        &:hover,
        &:focus {
            text-decoration: none; // Assicura nessuna sottolineatura su hover/focus
            // Se necessario, puoi personalizzare il colore al passaggio del mouse qui,
            // ma Bootstrap ha già una logica per il colore hover.
        }

        // Stile per il bottone della rubrica attiva (se si usa la classe 'active')
        &.active {
            font-weight: $font-weight-bold; // Esempio: ancora più pesante se attivo
            color: $custom-primary; // Esempio: colore primario se attivo
        }
    }
}

// Stili Accordion (possono essere messi qui o in un file _accordion.scss importato)
.accordion-button {
    font-weight: $font-weight-semibold; // Bootstrap usa $accordion-button-font-weight
}

.accordion-body {
    ul {
        padding-left: $accordion-body-padding-x; // Usa variabili Bootstrap per coerenza
        margin-bottom: 1rem;
        li {
            margin-bottom: 0.25rem;
        }
    }
}

// Firma
.signature-img {
    max-width: 250px;
    height: auto;
    margin-top: 1rem;
}

.hero-section {
    // background-color: #d3e4ff; // New background color // Removed
    color: $global-text-color; // Default text color for the section
    height: auto;
    h1, .h1, // If you also use .h1 class for non-h1 elements in the hero
  .display-1, .display-2, .display-3, // Include display classes if used here
  .display-4, .display-5, .display-6 {
        color: $custom-primary; // Updated heading color for contrast
        // Potresti aver bisogno di !important se ci sono utility di Bootstrap
        // che sovrascrivono questo colore (es. <h1 class="text-primary">)
        // color: #1f4876 !important;
    }
    // Note: Paragraph text will inherit $global-text-color from the .hero-section rule.
    // Specific styling for .lead or other text elements can be added here if needed.
    // Styles for text elements within .home-header-bg .hero-section are handled by more specific rules.
}

// Custom styles for .btn-ctc text color
.btn-ctc {
    --bs-btn-color: #241a00;
    // If you want to ensure this color is also used for hover and active states,
    // you can uncomment and set the following variables.
    // Otherwise, Bootstrap's default hover/active text color logic (based on background) will apply.
    // --bs-btn-hover-color: #241A00;
    // --bs-btn-active-color: #241A00;
}

// Newsletter Card
.newsletter-card {
    background-color: $newsletter-bg-color; // Assicura sfondo giallo chiaro
    transition:
        transform 0.2s ease,
        box-shadow 0.2s ease;

    &:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1) !important;
    }

    .newsletter-icon-wrapper {
        .material-symbols-outlined {
            animation: pulse 2s infinite;
        }
    }
}

.service-promo-card {
    background-color: $custom-primary; // Assicura sfondo giallo chiar
    transition:
        transform 0.2s ease,
        box-shadow 0.2s ease;

    &:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1) !important;
    }

    .service-icon-wrapper {
        .material-symbols-outlined {
            transition: transform 0.3s ease;
        }
    }

    &:hover .service-icon-wrapper .material-symbols-outlined {
        transform: scale(1.1);
    }
}

// Article Card Migliorata
.article-card-improved {
    transition: background-color 0.2s ease;
    padding: 1rem;
    margin: -1rem;
    border-radius: 0.75rem;

    &:hover {
        background-color: rgba(0, 118, 207, 0.02);
    }

    .article-card-image {
        transition: transform 0.3s ease;
    }

    &:hover .article-card-image {
        transform: scale(1.05);
    }

    .stretched-link::after {
        z-index: 1;
    }
}

.article-card-compact {
    transition: all 0.2s ease;

    &:hover {
        background-color: rgba(0, 118, 207, 0.05) !important;
        transform: translateX(4px);
    }
}

// @keyframes pulse {
//     0%,
//     100% {
//         opacity: 1;
//     }
//     50% {
//         opacity: 0.7;
//     }
// }

// Focus states migliorati
.btn:focus-visible,
.card:focus-within {
    outline: 2px solid var(--bs-primary);
    outline-offset: 2px;
}

// Responsive miglioramenti
@media (max-width: 576px) {
    .article-card-improved {
        padding: 0.5rem;
        margin: -0.5rem;
    }

    .sidebar-content {
        position: static !important;
    }
}

// Style for consulenza cards
.card-consulenza {
    background-color: $consulenza-bg-color; // Using $consulenza-bg-color (#e4eaf1)
}

// Style for categories card
.card-categories {
    background-color: $consulenza-bg-color; // Stessa tonalità della card consulenza
}

// Style for the sticky sidebar element on the home page
.sidebar-sticky-custom {
    top: 2rem; // From original inline style
}

// --- STILI SPECIFICI PER NEWSLETTER PAGE (Card Layout) ---

.newsletter-rubric-card {
    background-color: $white; // Assicura sfondo bianco per la card
    border-radius: $border-radius-lg; // .rounded-4 (0.5rem di default in BS5)
    box-shadow: $box-shadow-sm; // Ombra leggera di default
    // Rimuovo la transizione per eliminare l'animazione
    // transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    height: 100%; // Assicura che le card nella stessa riga abbiano la stessa altezza

    .card-body {
        padding: 1rem 1.25rem; // Leggero aggiustamento del padding se necessario
        align-items: center; // Allinea verticalmente icona, testo e switch
    }

    .newsletter-rubric-icon {
        width: 48px; // Adatta la dimensione dell'icona
        height: 48px;
        object-fit: contain; // o 'cover' a seconda delle tue icone
        flex-shrink: 0; // Impedisce all'icona di rimpicciolirsi
    }

    .card-title {
        color: $headings-color; // Colore standard per i titoli
    }

    .form-check-input[type="checkbox"] {
        // Stile per lo switch
        width: 2.75em;
        height: 1.375em;
        cursor: pointer;
        // Il colore :checked è già gestito dalle variabili CSS di Bootstrap
        // sovrascritte nel tuo :root (--bs-primary)
    }
}

// Se vuoi uno stile leggermente diverso per la card "Tutti gli aggiornamenti"
.newsletter-select-all-card {
    // Esempio: un bordo diverso o un leggero sfondo per distinguerla
    border: 1px solid $custom-primary;
}

// Direct styling for form switches - add this anywhere after the Bootstrap import
.form-check-input:checked {
    background-color: $custom-primary;
    border-color: $custom-primary;
}

.form-switch .form-check-input:checked {
    background-color: $custom-primary;
    border-color: $custom-primary;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e");
}

// 6. SOVRASCRITTURA VARIABILI CSS DI BOOTSTRAP (Opzionale ma potente per coerenza)
//    Questa sezione dovrebbe venire DOPO l'import di bootstrap.scss
//    Serve a garantire che le tue variabili primarie/secondarie si propaghino
//    correttamente a tutte le utility e componenti di Bootstrap che usano variabili CSS.
:root,
[data-bs-theme="light"] {
    --bs-primary: #{$custom-primary};
    --bs-primary-rgb: 0, 118, 207; // Manual RGB values instead of to-rgb()

    --bs-secondary: #{$custom-secondary};
    --bs-secondary-rgb: 84, 95, 112; // Manual RGB values

    --bs-warning: #{$custom-warning};
    --bs-warning-rgb: 248, 204, 71; // Manual RGB values

    --bs-body-color: #{$global-text-color};
    --bs-body-color-rgb: 25, 28, 32; // Manual RGB values

    --bs-ctc: #{$custom-ctc};
    --bs-ctc-rgb: 248, 204, 81; // Manual RGB values

    --bs-link-color: #{$link-color};
    --bs-link-color-rgb: 32, 54, 114; // Manual RGB values
    --bs-link-hover-color: #{$link-hover-color};
    --bs-link-hover-color-rgb: 21, 36, 77; // Manual RGB values

    // Form switch specific variables - add these new variables
    --bs-form-switch-checked-bg: #{$custom-primary};
    --bs-form-switch-checked-border-color: #{$custom-primary};
    --bs-form-switch-focus-color: #{rgba($custom-primary, 0.25)};
    --bs-form-switch-focus-bg-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='#{rgba($custom-primary, 0.25)}'/%3e%3c/svg%3e");

    // Sovrascrivi esplicitamente le variabili per la paginazione attiva
    --bs-pagination-active-bg: #{$custom-primary};
    --bs-pagination-active-border-color: #{$custom-primary};
    --bs-pagination-active-color: #fff; // Explicit white text for better contrast

    // Aggiungi queste righe per sovrascrivere i colori attivi dei nav-pills
    --bs-nav-pills-link-active-bg: #{$custom-primary};
    --bs-nav-pills-link-active-color: #{color-contrast($custom-primary)};

    // Enhanced pagination variables - complete set
    --bs-pagination-color: #{$link-color};
    --bs-pagination-bg: var(--bs-body-bg);
    --bs-pagination-border-color: var(--bs-border-color);
    --bs-pagination-hover-color: #{$link-hover-color};
    --bs-pagination-hover-bg: var(--bs-tertiary-bg);
    --bs-pagination-hover-border-color: var(--bs-border-color);
    --bs-pagination-focus-color: #{$link-hover-color};
    --bs-pagination-focus-bg: var(--bs-body-bg);
    --bs-pagination-focus-box-shadow: 0 0 0 0.25rem rgba(0, 118, 207, 0.25); // Direct RGBA values
    --bs-pagination-disabled-color: var(--bs-secondary-color);
    --bs-pagination-disabled-bg: var(--bs-body-bg);
    --bs-pagination-disabled-border-color: var(--bs-border-color);
}

// In resources/scss/custom.scss

// Definiamo alcuni colori per gli stati, ispirati a MD3
$md-hover-opacity: 0.08; // Opacità per l'overlay di hover
$md-focus-opacity: 0.12; // Opacità per l'overlay di focus (diverso dall'anello)
$md-pressed-opacity: 0.12; // Opacità per l'overlay di "premuto"

// Stili personalizzati per i bottoni-radio del filtro rubriche
.rubric-filter-buttons {
    .btn {
        position: relative; // Necessario per pseudo-elementi se usati per state layer
        overflow: hidden;
        color: #3c4758;
        background-color: $surface-color;
        border: 1px solid #c3c6cf;
        font-weight: $font-weight-medium;
        transition:
            background-color 0.2s ease-out,
            border-color 0.2s ease-out,
            box-shadow 0.2s ease-out;

        width: auto;
        flex-grow: 0;
        flex-shrink: 0;
        display: inline-flex;
        align-items: center;
        white-space: nowrap;
        padding: 0.375rem 0.75rem;
        border-radius: 0.5rem;

        &:hover {
            // Simula state layer scurendo lo sfondo esistente
            background-color: mix(
                black,
                $surface-color,
                $md-hover-opacity * 100%
            ); // Mixa nero con lo sfondo
            // border-color: darken(#c3c6cf, 8%); // Bordo leggermente più scuro
        }
        &.focus,
        &:focus,
        .btn-check:focus + & {
            // Anello di focus MD3-style (più sottile e interno o solo bordo colorato)
            border-color: $custom-primary;
            box-shadow: 0 0 0 2px $custom-primary; // Anello di focus più stretto e senza offset
            // Oppure, per un look più MD3 "solo bordo":
            // border-width: 2px; // Rende il bordo più spesso
            // box-shadow: none; // Rimuove l'ombra di Bootstrap

            // Simula state layer di focus
            // background-color: mix(black, $surface-color, $md-focus-opacity * 100%); // Se non selezionato
        }
    }

    .btn-check:checked + .btn {
        color: #3c4758 !important;
        background-color: #d8e3f8 !important;
        border-color: $custom-primary !important;
        // La larghezza sarà comunque 'auto' grazie alla regola sopra
    }
}

// ... (altri tuoi stili)

// .nav-pills {
//     // Stile di base per tutti i link (aspetto outline)
//     .nav-link {
//         color: #3c4758;
//         background-color: $surface-color; // Modificato da transparent a $surface-color
//         border: 1px solid #c3c6cf;
//         transition: all 0.2s ease-in-out;
//         font-weight: $font-weight-medium;

//         &:hover {
//             background-color: rgba(216, 227, 248, 0.3);
//         }
//     }

//     .nav-item {
//         margin-right: 1rem;
//         margin-bottom: 1rem;
//     }

//     .nav-link.active,
//     .show > .nav-link {
//         background-color: #d8e3f8 !important;
//         color: #3c4758 !important;
//         border-color: $custom-primary !important;
//         font-weight: $font-weight-medium;
//     }
// }

// .nav-underline {
//     --bs-nav-underline-gap: 1rem;
//     --bs-nav-underline-border-width: 0.125rem;
//     --bs-nav-underline-link-active-color: #{$custom-primary};

//     .nav-link {
//         padding-right: 0;
//         padding-left: 0;
//         color: #43474e; // Colore per link non attivi
//         border-bottom: var(--bs-nav-underline-border-width) solid transparent;

//         &:hover,
//         &:focus {
//             color: #{$custom-primary};
//             border-bottom-color: currentcolor;
//         }
//     }

//     .nav-link.active,
//     .show > .nav-link {
//         font-weight: $font-weight-medium; // Usiamo font-weight-medium invece di bold
//         color: var(--bs-nav-underline-link-active-color);
//         border-bottom-color: currentcolor;
//     }
// }

// Direct pagination styling with higher specificity
.pagination {
    .page-link:focus {
        box-shadow: 0 0 0 0.25rem rgba(0, 118, 207, 0.25); // Direct RGBA values instead of using to-rgb()
    }

    .page-item.active .page-link {
        color: #fff !important; // White text for best contrast with primary color
        border-color: $custom-primary !important;
        background-color: $custom-primary !important;
    }
}

// ... (i tuoi stili precedenti) ...

// -----------------------------------------------------------------------------
// STILI SPECIFICI PER LA PAGINA SINGOLO ARTICOLO (blog.show)
// -----------------------------------------------------------------------------

.article-page-container {
    // Eventuali stili per l'intero contenitore della pagina articolo
}

.article-page-header {
    // background-color: $gray-100; // Già bg-light, ma puoi personalizzare
    .breadcrumb {
        // background-color: $gray-200; // Esempio se vuoi un colore diverso dal bg-light
        // border: 1px solid $gray-300;
        .breadcrumb-item a {
            text-decoration: none;
            color: $link-color; // Usa il tuo colore link standard
            &:hover {
                color: $link-hover-color;
            }
        }
    }
    .article-title {
        // font-size: 2.8rem; // Esempio, display-4 è già grande
        // color: $headings-color; // Colore standard dei titoli
    }
    .article-meta-stats {
        // Stili aggiuntivi se necessari
        .article-interactions {
            // flex-shrink: 0; // Per evitare che si restringa troppo su mobile
        }
    }
}

.main-content-column {
    // Larghezza ottimale per la lettura su schermi grandi
    @media (min-width: map-get($grid-breakpoints, "xl")) {
        max-width: 780px; // Sperimenta con questo valore (es. 700px-850px)
        // Questo dovrebbe dare circa 65-85 caratteri per riga
    }
}

// Stili per il corpo dell'articolo per migliorare la leggibilità
.article-content {
    font-size: 1.1rem; // Leggermente più grande del default per il corpo
    line-height: 1.75; // Interlinea generosa
    color: $gray-800; // Un grigio scuro, non nero puro, per meno affaticamento

    p {
        margin-bottom: 1.25rem; // Spazio tra i paragrafi
    }

    h2,
    h3,
    h4,
    h5,
    h6 {
        margin-top: 2.5rem;
        margin-bottom: 1rem;
        // color: $headings-color; // Se hai un colore specifico per i titoli interni
        font-weight: 600; // Semibold
    }
    h2 {
        font-size: 1.8rem;
    }
    h3 {
        font-size: 1.5rem;
    }
    // ... e così via per le altre intestazioni se necessario

    a {
        // Link all'interno del corpo dell'articolo
        color: $custom-primary; // Usa il tuo colore primario
        text-decoration: underline;
        text-decoration-thickness: 1px;
        text-underline-offset: 3px;
        &:hover {
            color: darken($custom-primary, 10%);
            text-decoration-thickness: 2px;
        }
    }

    blockquote {
        border-left: 4px solid $gray-300;
        padding-left: 1rem;
        margin-left: 0;
        margin-right: 0;
        font-style: italic;
        color: $gray-700;
    }

    ul,
    ol {
        padding-left: 1.5rem;
        margin-bottom: 1.25rem;
        li {
            margin-bottom: 0.5rem;
        }
    }
    // Aggiungi stili per tabelle, code, ecc. se il tuo contenuto li usa
}

// Indice dei Contenuti (TOC)
#article-toc-container {
    // background-color: $light; // Già applicato con classe bg-light
    // border: 1px solid $border-color; // Già applicato con classe border
    // border-radius: $border-radius; // Già applicato con classe rounded
    .article-toc-list {
        max-height: 300px; // Altezza massima con scroll se diventa troppo lungo
        overflow-y: auto;
        a {
            // color: $gray-700; // Già text-body-secondary
            padding: 0.25rem 0.5rem;
            display: block;
            border-radius: $border-radius-sm;
            &:hover {
                background-color: rgba($custom-primary, 0.05);
                color: $custom-primary;
            }
            &.active-toc-link {
                // Classe da aggiungere con JS per il link attivo durante lo scroll
                background-color: rgba($custom-primary, 0.1);
                color: $custom-primary;
                font-weight: $font-weight-semibold;
            }
        }
    }
}

// Sezione Feedback e CTA
.article-feedback-cta {
    // Stili aggiuntivi se necessari
}

// Pulsanti di condivisione verticali (esempio base, da migliorare e rendere sticky/responsive)
.article-share-buttons.vertical-share {
    position: absolute; // O fixed/sticky se vuoi che segua lo scroll
    left: -80px; // Esempio: a sinistra del contenuto (richiede che il genitore sia relative)
    top: 150px; // Esempio
    z-index: 10; // Per stare sopra altro contenuto

    // Su schermi piccoli, nascondili o mettili orizzontali in fondo
    @media (max-width: (map-get($grid-breakpoints, "lg") - 1px)) {
        // Nascondi sotto LG
        display: none !important; // Sovrascrive d-none d-md-block se vuoi nasconderli diversamente
    }

    .btn {
        display: block; // Per impilarli verticalmente
        width: 40px; // Larghezza fissa
        height: 40px; // Altezza fissa
        padding: 0;
        font-size: 0.9rem; // Icona più piccola
        line-height: 40px; // Centra icona verticalmente
        text-align: center;
        // margin-bottom: 0.5rem; // Già mb-2
    }
}
// Per il posizionamento sticky/absolute dei bottoni social,
// la colonna .main-content-column (o un suo wrapper diretto) dovrebbe avere position: relative;
